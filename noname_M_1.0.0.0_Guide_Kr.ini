; MIIIME Hybrid Launcher Configuration
; ⓒ MIIIME

[Launch]
; 관리자 권한으로 실행
RunAsAdmin=0
; 런처 표시 이름 (메시지 박스 제목 등)
LauncherName=noname MIIIME Launcher
; 내부적으로 사용할 앱 식별 이름
AppName=noname
; 실행할 원본 실행 파일명 ({Run} 폴더 내)
ExeName=noname.exe
; 중복 실행 방지용 뮤텍스
UniqueMutex=noname_MIIIME_Mutex
; 중복 실행 허용 여부 (1=허용, 0=차단)
AllowMultipleInstances=1
; 작업 경로 (비워두면 {App} 폴더 기본값)
WorkDir=

[Directories]
; 실행 파일이 위치한 경로 (상대 경로)
RunPath=App\noname
; 사용자 데이터 원본(초기값) 경로
RawDataPath=App\RawDat
; 사용자 파일 경로
UserPath=App\Usr
; 사용자 데이터가 저장될 경로
DataPath=Dat

[Environment]
; --- [유형 1: 시스템 및 일반 변수] ---
; 형식: 변수명=값
; 목적: 시스템 PATH를 확장하거나 공통으로 사용할 경로 변수를 설정함.
CommonFilesDir=..\CommonFiles
PATH={CommonFiles}\Ghostscript\bin

; --- [유형 2: 런타임 라이브러리 설정] ---
; 목적: Java, Ghostscript, Python 등 외부 라이브러리 구동을 위한 필수 환경 변수 설정임.
GS_LIB={CommonFiles}\Ghostscript\bin;{CommonFiles}\Ghostscript\lib;{CommonFiles}\Ghostscript\Resource;{CommonFiles}\Ghostscript\Resource\fonts
GS_DLL={CommonFiles}\Ghostscript\bin\gsdll64.dll
XNVIEW_GS_DLL={CommonFiles}\Ghostscript\bin\gsdll64.dll
XNVIEW_GS_LIB={CommonFiles}\Ghostscript\bin;{CommonFiles}\Ghostscript\lib;{CommonFiles}\Ghostscript\Resource;{CommonFiles}\Ghostscript\Resource\fonts
JAVA_HOME={CommonFiles}\Java64
_JAVA_OPTIONS="-Dfile.encoding=UTF-8"
PYTHONPATH={Base}\Lib\site-packages
NODE_PATH={CommonFiles}\nodejs\node_modules

; --- [유형 3: 포터블 가상 변수] ---
; 목적: 포터블 앱 내부에서 참조할 사용자 정의 변수를 선언함.
; 앱 설정에서 절대 경로(C:\...) 대신 이 변수(%MY_APP_ROOT%)를 사용하면 경로 의존성을 제거할 수 있음.
MY_APP_ROOT={Run}
MY_PLUGINS_DIR={Run}\Plugins
MY_TEMP_DIR={Local}\Temp\MyApp

; --- [유형 4: 내부 및 시스템 강제 설정] ---
; 목적: 언어(Locale), 인코딩을 강제하거나 시스템 Temp 경로를 리다이렉션함.
LANG=ko_KR.UTF-8
LC_ALL=ko_KR.UTF-8
TMP={Local}\Temp
TEMP={Local}\Temp
APP_LOG_DIR={Dat}\{AppName}\Logs

[Options]
; 1=정션 모드(심볼릭 링크), 0=스왑 모드(물리적 이동)
UseJunction=1
; 1=프리즈 모드(읽기 전용, 저장 안 함), 0=일반 모드
FreezeMode=0
; 0=끄기, 1=로그파일 생성
EnableLog=0
; 실행 시 추가할 명령어 인수
AddCommand=

[ProcessWatch]
; 메인 앱 외에 감시할 추가 프로세스 목록
; [주의] 런처는 자식 프로세스를 자동으로 추적하지 않음. 별도로 실행되는 프로세스는 반드시 여기에 등록해야 종료 시 함께 정리됨.
01=updater.exe
02=noname64.exe

[Registry]
; 실제 프로그램이 사용하는 레지스트리 키 (백업 및 삭제 대상)
01=HKEY_CURRENT_USER\SOFTWARE\VendorName\noname

[RegistryRoot]
; 프로그램 키 삭제 후 비어있으면 정리할 상위 키
; 만약 VendorName 안에 다른 앱 키가 남아있으면 삭제되지 않음.
01=HKEY_CURRENT_USER\SOFTWARE\VendorName

[RegistryFix]
; 경로|이름|값 (타입 자동 감지, 매크로 사용 가능)
01=HKEY_CURRENT_USER\Software\noname|InstallPath|{Run}

[RegistryShell]
; --- [범용 쉘(Shell) 등록 섹션] ---
; 형식: 대상|식별ID|메뉴이름|명령어(Command)|아이콘경로(선택사항)
; -------------------------------------------------------------------------------------
; 1. SystemTrayMenu 예시 (폴더 우클릭 메뉴)
01=Directory|STM_Root|Set as Root Folder|"{Exe}" "%1"|"{Exe}"
; 2. 파일 연결 예시 (모든 파일 우클릭 메뉴)
02=*|MyLauncher_Open|Open with noname|"{Exe}" "%1"|"{Exe},0"

[CleanupPath]
; --- [회수 전 정크 파일 정리] ---
; 데이터 회수(저장) 전, 호스트에서 삭제할 경로임.
; 이 경로들은 Dat에 저장되지 않고 삭제됨.
; 예시: Common Electron/Chromium Cache
01={Roaming}\noname\blob_storage
02={Roaming}\noname\Cache
03={Roaming}\noname\Code Cache
04={Roaming}\noname\DawnGraphiteCache
05={Roaming}\noname\DawnWebGPUCache
06={Roaming}\noname\Dictionaries
07={Roaming}\noname\GPUCache
08={Roaming}\noname\logs
09={Roaming}\noname\Network
10={Roaming}\noname\Service Worker
11={Roaming}\noname\Shared Dictionary
12={Roaming}\noname\WebStorage
13={Roaming}\noname\.update-id
14={Roaming}\noname\DIPS
15={Roaming}\noname\DIPS-wal
16={Roaming}\noname\lockfile
17={Roaming}\noname\SharedStorage
18={Roaming}\noname\SharedStorage-wal
19={Local}\noname\CrashReports

[FileWrite]
; --- [유형 1: INI 구조 파일 (4단 구성)] ---
; 형식: 파일경로|섹션명|키이름|바꿀값
; 장점: 섹션이 여러 개여도 정확한 키만 수정하며, 경로에 공백이 있어도 안전함.
01={Run}\Notepad4.ini|Settings|DefaultDirectory|{Run}
02={Run}\noname.ini|ExtCodec\0000|Name|CoreAVC Video Decoder

; --- [유형 2: 일반 텍스트 파일 (3단 구성)] ---
; 형식: 파일경로|찾을문자열|바꿀문자열
; 대상: .txt, .xml, .cfg 등 섹션 구조가 없는 일반 텍스트 파일
03={Run}\Config.xml|<WorkDir>C:\OldPath</WorkDir>|<WorkDir>{Run}</WorkDir>
; ★ FreezeMode에서는 {Dat} 경로에 대한 쓰기가 차단됨.

[UserAssets]
; {Ast}의 모든 폴더/파일 구조를 {Run}으로 복사 (하위 디렉토리 포함)
01={Ast}\*|{Run}
; {Ast}\Skins 폴더 전체를 {Run}\Skins 경로로 복사
02={Ast}\Skins|{Run}\Skins
; {Ast}\Skins 폴더 안의 내용물만 {Run}으로 복사
03={Ast}\Skins|{Run}

[UserExtras]
; 추가 파일 주입 설정 (드라이버, DLL 등)
; 형식: 소스경로|목적지경로|백업여부(1=사용, 0=미사용)
; {Ext}는 App\Usr\Ext 폴더를 가리킵니다.
; [주의] 이 옵션은 관리자 기능이 꺼져 있으면 작동하지 않을 수 있음. ({System32}, {Windows} 주입 시 권한 필수)
;
; [사용 가능한 매크로]
; {System32}     : C:\Windows\System32 (시스템 DLL, .cpl 파일 주입)
; {Windows}      : C:\Windows (ini 설정 파일(구형 프로그램), 폰트 등)
; {ProgramFiles} : C:\Program Files (플러그인, 공용 라이브러리 폴더)
; {Docs}         : 문서 폴더 (라이선스 키, 설정 파일이 문서 폴더에 필요한 경우)
; {UserProfile}  : 사용자 프로필 루트 (예: C:\Users\Name, .공용설정 폴더 등)
;
; [!] 64비트 OS에서 32비트 런처 사용 시 주의:
; System32(드라이버 등)에 파일을 넣어야 한다면 {System32} 대신 반드시 {SysNative}를 사용해야 함.
; {System32} 사용 시 SysWOW64로 리다이렉션 될 수 있음.
; -------------------------------------------------------------------------------------
; 예시 1: 드라이버 주입 (관리자 권한 필요)
01={Ext}\Drivers\my_driver.sys|{SysNative}\drivers\my_driver.sys|1
; 예시 2: DLL 주입
02={Ext}\Libs\special_lib.dll|{Windows}\special_lib.dll|0
; 예시 3: 문서 폴더에 라이선스 파일 주입
03={Ext}\Key.lic|{Docs}\MySoftware\Key.lic|1

[UserResources]
; Folder Icon / 폴더 아이콘 지정
FolderIcon={Res}\Folder.ico
; Splash Image / 스플래시 이미지 지정
Splash={Res}\Splash.png




